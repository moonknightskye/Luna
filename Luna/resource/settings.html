<html>
    <head>
        <META NAME="viewport" CONTENT="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
        <META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=UTF-8" />
        <link href="css/matostyles.css" rel="old stylesheet" type="text/css" />
        <link href="css/lunastyles.css" rel="newer stylesheet" type="text/css" />
        <link href="css/phobosstyles.css" rel="newer stylesheet" type="text/css" />
        <script type="text/javascript" src="js/luna.js" ></script>
        <script type="text/javascript" src="../Apollo11.js" ></script>
        <script type="text/javascript" src="js/phobos.js" ></script>
        <style>
/*        PARALLAX EFFECT
        http://codepen.io/saransh/pen/BKJun
        */

            .header {
                margin-bottom: 12pt;
            }

            .scroller-holder {
                width: 100%;
                height: 100%;
                margin: auto;
                background-color: transparent;
                overflow: scroll;
                -webkit-overflow-scrolling: touch;
                position: absolute !important;
                top: 0px;
            }

            .scroller {
                width: 100%;
            }

            .setting-page {
                transition: all 0.4s ease-in-out;
                opacity: 0;
            }

            .setting-page.active {
                z-index: 100;
                position: absolute !important;
                top: 0px;
                left: 0px;
                opacity: 1;
            }

            .section-disclaimer {
                font-size: x-small;
                position: fixed !important;
                bottom: 0px;
                margin: 4pt;
                color: #616161;
            }


        </style>
        <script>
            (function(){
                window.addEventListener("load", function(){
                    window.setTimeout(function(){
                        cloud_six.classList.add("smove");
                        cloud_four.classList.add("smove");
                    },0);

                });

                var luna = new Luna();
                luna.addEventListener( "ready", function(){

                    // luna.addEventListener( "screenEdgeSwiped", function(){
                    //     luna.debug("left 2")
                    // },{touchesRequired:2, direction:"left"});

                    // luna.addEventListener( "screenEdgeSwiped", function(){
                    //     luna.debug("left 1")
                    // },{touchesRequired:1, direction:"left"});

                    // luna.addEventListener( "screenEdgeSwiped", function(){
                    //     luna.debug("right 1")
                    // },{touchesRequired:1, direction:"right"});




                    luna.settings().then(function(settings){
                        //luna.debug(settings.getDefaults())


                        apollo11.forEveryKey( settings.getDefaults(), function(value, key) {
                            //luna.debug(key + ": " + value)
                            var inputs = apollo11.getElement({src:key},"DATA");
                            apollo11.forEvery(inputs,function(input){
                                if( input.classList.contains("input-checkbox") ) {
                                    input.checked = value;
                                } else if( input.classList.contains("input-text") ) {
                                    var inputelem = apollo11.getElement("input", "SELECT", input);
                                    inputelem.value = value;
                                    if( inputelem.value.length > 0 ) {
                                        window.setTimeout(function(){
                                            inputelem.focus();
                                        },10);
                                    }
                                } else if( input.classList.contains("input-select-btn") ) {
                                    input.dataset.value = value;
                                    apollo11.getElement("SPAN", "SELECT", input).innerText = value;
                                }
                            });

                            apollo11.forEvery(inputs,function(input){
                                if( input.classList.contains("input-checkbox") ) {
                                    input.addEventListener("change",function(e){
                                        settings.set({key:input.dataset.src,value:input.checked});
                                    });
                                } else if( input.classList.contains("input-text") ) {
                                    var inputelem = apollo11.getElement("input", "SELECT", input);
                                    inputelem.addEventListener("blur",function(e){
                                        settings.set({key:input.dataset.src,value:inputelem.value});
                                    });
                                } else if( input.classList.contains("input-select-btn") ) {
                                    input.addEventListener("change",function(e){
                                        settings.set({key:input.dataset.src,value:input.dataset.value});
                                    },false);
                                }
                            });
                        });
                        // settings.get({key:"startup_page"}).then(function(result){
                        //     luna.debug("startup_page: " + result)
                        // });

                        // settings.set({key:"mato_test",value:"mato"}).then(function(result){
                        //     luna.debug("set: " + result);
                        //     settings.get({key:"mato_test"}).then(function(result){
                        //         luna.debug("get: " + result)

                        //         luna.debug(settings.getDefaults());

                        //         settings.delete({key:"mato_test"}).then(function(result){
                        //             luna.debug("delete mato_test: " + result)
                        //             luna.debug(settings.getDefaults());
                        //         }, function(error){
                        //             luna.debug("delete mato_test: " + error)
                        //         });

                        //     });
                        // });

                   });
                });
             })();
        </script>
    </head>
    <body class="splashscreen settings">
        <section class="phobos matostyle">


            <div class="phobos-page setting-page scroller-holder active">
                <div class="scroller">

                    <div class="section section-setting">
                        <div class="header">LUNA SETTINGS</div>

                        <div class="section-content">
                            <ul class="flex-box">
                                <li class="flex-one">
                                    <span class="content-label">
                                        Show on
                                    </span>
                                </li>
                                <li class="flex-two">
                                    <span class="phobos-input input-select-btn" data-src="show_settings" data-id="2" data-value="Shake 3 times" data-choices="{
                                      'choices': ['Shake 1 time or greater', 'Shake 3 times or greater', 'Shake 6 times or greater', '1-finger right edge swipe', '2-finger right edge swipe', '3-finger right edge swipe','1-finger left edge swipe', '2-finger left edge swipe', '3-finger left edge swipe']
                                    }">
                                        <span>Shake 3 times</span><i class="arrow right"></i>
                                    </span>
                                </li>
                            </ul>
                            <div class="content-description">
                                Activate this settings page on gesture
                            </div>
                        </div>

                        <div class="section-content">
                            <ul class="flex-box">
                                <li class="flex-two">
                                    <span class="content-label">
                                        Show Splash Screen
                                    </span>
                                </li>
                                <li class="flex-one">
                                    <input class="phobos-input input-checkbox" type="checkbox" data-src="splash_screen"></li>
                                </li>
                            </ul>
                            <div class="content-description">
                                Show Luna splash screen during startup. Splash screen prevents displaying the black screen while the page loads
                            </div>
                        </div>

                        <div class="section-content">
                            <ul class="flex-box">
                                <li class="flex-two">
                                    <span class="content-label">
                                        Startup Page Enabled
                                    </span>
                                </li>
                                <li class="flex-one">
                                    <input class="phobos-input input-checkbox" type="checkbox" data-src="startup_enabled"></li>
                                </li>
                            </ul>
                            <div class="content-description">
                                Instead of displaying this setting page. Luna will try to load the Startup Page during app load
                            </div>
                        </div>

                        <div class="section-content">
                            <ul class="flex-box">
                                <li class="flex-two">
                                    <span class="content-label">
                                        Startup Type
                                    </span>
                                </li>
                                <li class="flex-one">
                                    <span class="phobos-input input-select-btn" data-src="startup_type" data-id="1" data-value="URL" data-choices="{
                                      'choices': ['URL', 'Document']
                                    }">
                                        <span>URL</span><i class="arrow right"></i>
                                    </span>
                                </li>
                            </ul>
                            <div class="content-description">
                                Specify URL if the Startup page resides on a server, else choose Document to display iTunes file (you can transfer HTML files to this app using iTunes on your pc)
                            </div>
                        </div>

                        <div class="section-content">
                            <ul class="flex-box">
                                <li class="flex-one">
                                    <span class="content-label">
                                        Startup Page
                                    </span>
                                </li>
                                <li class="flex-two">
                                    <span class="phobos-input input-text" data-src="startup_page">
                                        <input type="text" />
                                    </span>
                                </li>
                            </ul>
                            <div class="content-description">
                                If you chose URL, specify the address including the http prefix. Else, specify the relative path of the HTML file located in iTunes file folder
                            </div>
                        </div>

                        <div class="section-disclaimer">
                            Thank you for using this app. This was developed by Mart Civil working as a Demo Engineer in Salesforce Tokyo Japan Branch. I distribute this app for free so by using this app the developer is not liable to any damage inflicted. As for every software there exists bugs, please send email to mcivil@salesforce.com for bug reports. Please do undestand that I cannot entertain urgent bug fixes for this app is maintained only on my free time.
                        </div>

                    </div>

                    <div class="debug"></div>
                </div>
            </div>
            <div class="background">
                <div class="moon moon-center" ></div>
                <div id="clound_one" class="cloud-one" ></div>
                <div id="cloud_six" class="cloud-six"></div>
                <div id="cloud_four" class="cloud-four"></div>
            </div>
        </section>
    </body>
</html>
