<html>
    <head>
        <META NAME="viewport" CONTENT="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
        <META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=UTF-8" />
        <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
        <link href="css/matostyles.css" rel="old stylesheet" type="text/css" />
        <link href="css/style.css" rel="newer stylesheet" type="text/css" />
        <script type="text/javascript" src="js/luna.js" ></script>
        <script type="text/javascript" src="js/strict_utility.js" ></script>
        <script type="text/javascript" src="js/logic.js" ></script>
    <style>
            body {
                background-color: transparent;
                margin: 0px;
            }

            #app_content {
            	height: 100%;
            	width: 100%;
            }
        </style>
        <script>
            var luna = new Luna();
        
            (function(){
                luna.onReady(function(){
                	//luna.debug("iOS initialized");

                	var avplayer;
                	luna.getVideoFile({
	                    filename:   "BigBuckBunny_320x180.mp4",
	                    path_type:  "document"
	                  }).then(function( video_file ){
	                    //luna.debug( "luna.takeVideo:" +  video_file.getFilename() + " " + video_file.getFileExtension() );

	                    luna.getNewAVPlayer({
	                      video_file: video_file,
	                      property: {
		                      frame: {
		                        height:   100,
		                        width: 150
		                      },
		                      opacity:    1,
		                      autoPlay:   true,
		                      mute:       false
		                    }
	                    }).then(function( _avplayer ){
	                      
	                      avplayer = _avplayer;

	                      luna.getMainWebview().appendAVPlayer({
	                        avplayer: avplayer,
	                        isFixed: false
	                      }).then( function(result){
	                        //luna.debug( "appendAVPlayer: " + result )
	                      });


	                      //luna.debug( "luna.getNewAVPlayer: " +  avplayer.getID());
	                    }, function(error){
	                      luna.debug( error );
	                    })

	                  },function(error){
	                    luna.debug( error );
	                  });


	                  var isPlaying = true;
	                  utility.getElement( "app_content", "id" ).addEventListener( "click", function() {
		                if( avplayer ) {
		                	if( !isPlaying ) {
		                		avplayer.play().then( function(result){
				                    //luna.debug( "avplayer.play: " + result );
				                    isPlaying = true;
				                  });
		                	} else {
		                		avplayer.pause().then( function(result){
		                			isPlaying = false;
				                    //luna.debug( "avplayer.pause: " + result );
				                });
		                	}
		                }
		              });

                });

             })();
        </script>
    </head>
    <body>
        <article id="app_content" class="matostyle">

        </article>
    </body>
</html>

